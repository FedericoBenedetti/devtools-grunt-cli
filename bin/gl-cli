#!/usr/bin/env node

"use strict";

var path = require("path");

var asset = path.resolve.bind(null, __dirname, "..");

var grunt = require("grunt");

grunt.cli.tasks = ["generate-folder"];
grunt.help.queue = [
  "header",
  "usage",
  "footer"
];

grunt.help.header = function () {
  grunt.log.header("\n gl-cli: ");
  grunt.log.writeln("\n grunt plugin to easily generate predefined templates for different type of works.");
};

grunt.help.usage = function () {
  grunt.log.header(" Usage: ");
  grunt.log.writeln("\n " + path.basename(process.argv[1]) + " [options] [template name]");
  grunt.log.header("\n Options available: ");
  grunt.log.writeln("\n web \t\t-: web template");
  grunt.log.writeln(" desktop \t-: desktop template");
  grunt.log.writeln(" help/h \t-: help");

};

grunt.help.footer = function () {
  grunt.log.header(" For more information, see: ");
  grunt.log.writeln(" \n\t\thttps://git.loccioni.com/IT/devtools/gl-grunt-project-cli\n\n");
};

grunt.help.log = function () {
  grunt.log.header("\n Logs: ");
}

args_logic = function () {
  var args = process.argv;
  args.forEach(function (arg) {
    if (arg === "h" || arg === "help") {
      grunt.help.queue.forEach(helpMsg => {
        grunt.help[helpMsg]();
      });
      process.exit();
    }

    if (arg != "web" ||
      arg != "desktop" ||
      arg != "v" ||
      arg != "verbose") {

      grunt.option("pjtitle", arg);
      grunt.log.writeln("\n LOG: template name: " + "'" + arg + "'");
    }

    if (arg === "desktop") {
      grunt.option("type", "desktop");
      grunt.log.writeln("\n LOG: type of task: '" + arg + "'");
    }

    if (arg === "v" || 
      arg === "verbose") {

      grunt.option("verbose", true);
      grunt.log.writeln("\n LOG: executing with 'verbose' option. ");
    }

  });
}

grunt.options = {
  gruntfile: asset("Gruntfile.js"),
  cwd: process.cwd(),
  type: "web",
  pjtitle: "default",
  verbose: false,
  asset: asset
}

grunt.cli(grunt.options);